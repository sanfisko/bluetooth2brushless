# Часто задаваемые вопросы (FAQ)

## Общие вопросы

### В: Какие двигатели поддерживаются?
**О:** Проект предназначен для бесщеточных двигателей постоянного тока (BLDC) с контроллерами, поддерживающими PWM управление скоростью и цифровое управление направлением. Мощность до 500W, напряжение 12-36V.

### В: Можно ли использовать обычные щеточные двигатели?
**О:** Да, но потребуется другой контроллер. Принцип управления остается тем же - PWM для скорости и GPIO для направления.

### В: Какая максимальная дальность Bluetooth?
**О:** В прямой видимости до 10 метров. В помещении с препятствиями - 3-5 метров. Зависит от окружающих помех и препятствий.

## Подключение и настройка

### В: ESP32 не определяется компьютером
**О:** Проверьте:
1. USB кабель должен поддерживать передачу данных (не только зарядку)
2. Установите драйверы CH340 или CP2102
3. Попробуйте другой USB порт
4. Нажмите кнопку BOOT на ESP32 при загрузке

### В: Ошибка компиляции "BluetoothSerial.h not found"
**О:** Убедитесь, что:
1. Установлен пакет ESP32 в Arduino IDE
2. Выбрана правильная плата (ESP32 Dev Module)
3. Версия пакета ESP32 поддерживает Bluetooth (2.0.0+)

### В: Двигатель не реагирует на команды
**О:** Проверьте:
1. Подключение проводов согласно схеме
2. Общий GND между ESP32 и контроллером
3. Питание контроллера двигателя
4. Правильность настройки PWM частоты
5. Совместимость контроллера с 3.3V сигналами

### В: Можно ли использовать 5V контроллер с ESP32?
**О:** ESP32 выдает 3.3V, но большинство контроллеров принимают это как логическую единицу. Если нет - используйте преобразователь уровней или делитель напряжения.

## Bluetooth и управление

### В: Пульт BT13 не подключается
**О:** 
1. Убедитесь, что ESP32 запущен и виден как "ESP32_Motor_Control"
2. Очистите список сопряженных устройств на пульте
3. Попробуйте подключиться через телефон сначала
4. Проверьте заряд батареи пульта

### В: Какие команды отправляет пульт BT13?
**О:** Стандартные команды:
- Vol+ → '+' (увеличение скорости)
- Vol- → '-' (уменьшение скорости)  
- Play/Pause → 'P' (изменение направления)

Команды могут отличаться у разных производителей.

### В: Можно ли управлять с телефона?
**О:** Да! Установите Bluetooth терминал (например, "Serial Bluetooth Terminal") и отправляйте команды: +, -, P, S, E

### В: Как изменить имя Bluetooth устройства?
**О:** В коде измените строку:
```cpp
SerialBT.begin("ESP32_Motor_Control");  // Ваше имя здесь
```

## Безопасность и защита

### В: Что происходит при потере Bluetooth соединения?
**О:** Через 5 секунд без команд двигатель автоматически останавливается. Это настраивается параметром `commandTimeout`.

### В: Как добавить аварийную кнопку СТОП?
**О:** Подключите кнопку к любому GPIO пину и добавьте в код:
```cpp
const int emergencyStopPin = 4;
pinMode(emergencyStopPin, INPUT_PULLUP);

// В loop():
if (digitalRead(emergencyStopPin) == LOW) {
  stopMotor();
}
```

### В: Можно ли ограничить максимальную скорость?
**О:** Да, измените константу:
```cpp
const int maxSpeed = 200;  // Вместо 255
```

## Производительность и оптимизация

### В: Двигатель работает рывками
**О:** Возможные причины:
1. Низкая частота PWM - увеличьте до 10-20 кГц
2. Помехи в питании - добавьте конденсаторы
3. Плохое соединение проводов
4. Неподходящий контроллер

### В: Как сделать плавное изменение скорости?
**О:** Замените мгновенное изменение на постепенное:
```cpp
void smoothSpeedChange(int targetSpeed) {
  while (speed != targetSpeed) {
    speed += (targetSpeed > speed) ? 1 : -1;
    ledcWrite(pwmChannel, speed);
    delay(10);
  }
}
```

### В: Можно ли увеличить дальность Bluetooth?
**О:** Ограниченно:
1. Используйте внешнюю антенну для ESP32
2. Избегайте помех (WiFi, микроволновки)
3. Обеспечьте прямую видимость
4. Рассмотрите WiFi управление для больших расстояний

## Расширение функциональности

### В: Как добавить обратную связь о скорости?
**О:** Подключите энкодер к GPIO 18,19 и используйте прерывания для подсчета оборотов. Пример кода есть в EXAMPLES.md.

### В: Можно ли управлять несколькими двигателями?
**О:** Да, используйте дополнительные PWM каналы:
```cpp
const int motor2SpeedPin = 27;
const int motor2DirPin = 14;
ledcSetup(1, freq, resolution);  // Канал 1 для второго мотора
```

### В: Как добавить датчик тока?
**О:** Подключите датчик тока к аналоговому входу и читайте значения:
```cpp
float current = analogRead(A0) * (3.3/4095.0) / 0.1;  // Для датчика 0.1В/А
```

### В: Можно ли сохранять настройки?
**О:** Используйте EEPROM или SPIFFS:
```cpp
#include <Preferences.h>
Preferences prefs;

// Сохранение
prefs.begin("motor", false);
prefs.putInt("maxSpeed", maxSpeed);
prefs.end();

// Загрузка
prefs.begin("motor", true);
maxSpeed = prefs.getInt("maxSpeed", 255);
prefs.end();
```

## Устранение неполадок

### В: LED не мигает при получении команд
**О:** Проверьте:
1. Правильность подключения к GPIO 2
2. Не используется ли пин для других целей
3. Работает ли Bluetooth соединение

### В: Двигатель вращается только в одну сторону
**О:** 
1. Проверьте подключение пина направления (GPIO 26)
2. Убедитесь, что контроллер поддерживает реверс
3. Проверьте логику управления направлением

### В: Система зависает при подключении Bluetooth
**О:** 
1. Перезагрузите ESP32
2. Проверьте питание (достаточный ток)
3. Обновите прошивку ESP32
4. Используйте watchdog timer

### В: Высокое энергопотребление в режиме ожидания
**О:** Добавьте режим сна:
```cpp
#include <esp_sleep.h>

// При неактивности
esp_sleep_enable_timer_wakeup(10000000);  // 10 секунд
esp_light_sleep_start();
```

## Совместимость

### В: Работает ли с Arduino Uno/Nano?
**О:** Нет, код использует специфичные для ESP32 библиотеки (BluetoothSerial, ledcWrite). Для Arduino нужна переработка кода.

### В: Можно ли использовать с Raspberry Pi?
**О:** Принципиально да, но потребуется полная переработка на Python с использованием библиотек GPIO и Bluetooth.

### В: Совместимо ли с другими пультами?
**О:** Да, если они отправляют ASCII команды по Bluetooth. Возможно потребуется изменить обработку команд в коде.

## Лицензирование и поддержка

### В: Можно ли использовать в коммерческих проектах?
**О:** Да, проект под лицензией MIT. Требуется только указание авторства.

### В: Где получить техническую поддержку?
**О:** 
1. Изучите документацию в репозитории
2. Проверьте раздел Issues на GitHub
3. Создайте новый Issue с подробным описанием проблемы

### В: Как внести свой вклад в проект?
**О:** 
1. Сделайте Fork репозитория
2. Внесите изменения
3. Создайте Pull Request с описанием изменений