# üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–¥–ª—è —á–∞–π–Ω–∏–∫–æ–≤)

## üõí –ß—Ç–æ –∫—É–ø–∏—Ç—å

- ESP32 (–ª—é–±–æ–π, –≥–ª–∞–≤–Ω–æ–µ —á—Ç–æ–± —Ä–∞–±–æ—Ç–∞–ª)
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –º–æ—Ç–æ—Ä–∞ (—Å PWM –≤—Ö–æ–¥–æ–º)
- –ú–æ—Ç–æ—Ä –±–µ—Å—â–µ—Ç–æ—á–Ω—ã–π (–Ω–µ —Å–æ–∂–≥–∏ –¥–æ–º)
- –ü—É–ª—å—Ç BT13 (–∏–º–µ–Ω–Ω–æ BT13!)
- –ü—Ä–æ–≤–æ–¥–∞ (–º–Ω–æ–≥–æ –ø—Ä–æ–≤–æ–¥–æ–≤)

## üíª –°–æ—Ñ—Ç

### Arduino IDE (–ø—Ä–æ—Å—Ç–æ–π –ø—É—Ç—å)
```bash
1. –°–∫–∞—á–∞–π Arduino IDE 2.0+
2. –§–∞–π–ª ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
   https://espressif.github.io/arduino-esp32/package_esp32_index.json
3. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ‚Üí –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–ª–∞—Ç ‚Üí ESP32 ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
4. –ì–æ—Ç–æ–≤–æ!
```

### ESP-IDF (–¥–ª—è –º–∞–∑–æ—Ö–∏—Å—Ç–æ–≤)
```bash
# Ubuntu/macOS
git clone https://github.com/espressif/esp-idf.git
cd esp-idf
./install.sh esp32
. ./export.sh
# –¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å —Å—Ç—Ä–∞–¥–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ
```

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```
ESP32 GPIO 25 ‚Üí –ú–æ—Ç–æ—Ä SPEED    (–Ω–µ –ø–µ—Ä–µ–ø—É—Ç–∞–π!)
ESP32 GPIO 26 ‚Üí –ú–æ—Ç–æ—Ä DIR      (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
ESP32 GND     ‚Üí –ú–æ—Ç–æ—Ä GND      (–∑–µ–º–ª—è –æ–±—â–∞—è)

–ú–æ—Ç–æ—Ä –ø–∏—Ç–∞–Ω–∏–µ: 12-36V (–Ω–µ –æ—Ç ESP32!)
```

‚ö†Ô∏è **–ù–ï –ü–û–î–ö–õ–Æ–ß–ê–ô –ú–û–¢–û–† –ö 3.3V ESP32!** (—Å–≥–æ—Ä–∏—Ç –Ω–∞—Ñ–∏–≥)

## üì± –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: Arduino IDE
```bash
1. –û—Ç–∫—Ä–æ–π bluetooth2brushless_hid_client.ino
2. –ü–ª–∞—Ç–∞: ESP32 Dev Module
3. –ü–æ—Ä—Ç: —Ç–æ—Ç —á—Ç–æ –ø–æ—è–≤–∏–ª—Å—è –∫–æ–≥–¥–∞ –≤–æ—Ç–∫–Ω—É–ª ESP32
4. –ù–∞–∂–º–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å"
5. –ñ–¥–∏ –∏ –º–æ–ª–∏—Å—å
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: ESP-IDF
```bash
cd esp-idf-version
idf.py build        # —Å–æ–±—Ä–∞—Ç—å
idf.py flash        # –ø—Ä–æ—à–∏—Ç—å
idf.py monitor      # —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
```

## üéÆ –¢–µ—Å—Ç

1. –í–∫–ª—é—á–∏ BT13
2. ESP32 —Å–∞–º –µ–≥–æ –Ω–∞–π–¥–µ—Ç (–µ—Å–ª–∏ –Ω–µ –¥—É—Ä–∞–∫)
3. –ñ–º–∏ –∫–Ω–æ–ø–∫–∏ –Ω–∞ –ø—É–ª—å—Ç–µ
4. –ú–æ—Ç–æ—Ä –∫—Ä—É—Ç–∏—Ç—Å—è = –ø–æ–±–µ–¥–∞! üéâ  
- `P` - –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- `S` - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—å
- `E` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—å

### –ß–µ—Ä–µ–∑ –ø—É–ª—å—Ç BT13
1. –í–∫–ª—é—á–∏—Ç–µ –ø—É–ª—å—Ç BT13
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–ø—Ä—è–∂–µ–Ω–∏–µ —Å ESP32
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏:
   - Vol+ (–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏) - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
   - Vol- (–£–º–µ–Ω—å—à–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏) - —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
   - Play/Pause - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### ESP32 –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ USB-–∫–∞–±–µ–ª—å (–¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö)
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥—Ä–∞–π–≤–µ—Ä—ã CH340/CP2102 –¥–ª—è –≤–∞—à–µ–π –û–°
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π USB-–ø–æ—Ä—Ç

### –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–∞–∫–µ—Ç ESP32
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–ª–∞—Ç—ã
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Arduino IDE

### Bluetooth –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ ESP32 –∑–∞–ø—É—â–µ–Ω –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Bluetooth –≤–∫–ª—é—á–µ–Ω –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ "–∑–∞–±—ã—Ç—å" —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ

### –î–≤–∏–≥–∞—Ç–µ–ª—å –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ö–µ–º–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–∏—Ç–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—â–∏–π GND –º–µ–∂–¥—É ESP32 –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º
- –ò–∑–º–µ—Ä—å—Ç–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ PWM (–¥–æ–ª–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å—Å—è –æ—Ç 0 –¥–æ 3.3V)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ PWM
–í —Ñ–∞–π–ª–µ `bluetooth2brushless.ino` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:
```cpp
const int freq = 1000;          // –ß–∞—Å—Ç–æ—Ç–∞ PWM (–ì—Ü)
const int speedStep = 10;       // –®–∞–≥ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
const int maxSpeed = 255;       // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ Bluetooth
```cpp
SerialBT.begin("ESP32_Motor_Control");  // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∂–µ–ª–∞–µ–º–æ–µ –∏–º—è
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–π–º–∞—É—Ç–∞
```cpp
const unsigned long commandTimeout = 5000; // –¢–∞–π–º–∞—É—Ç –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û**: 
- –í—Å–µ–≥–¥–∞ –æ—Ç–∫–ª—é—á–∞–π—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –ø—Ä–æ–≤–æ–¥–æ–≤
- –ù–µ –ø—Ä–µ–≤—ã—à–∞–π—Ç–µ –Ω–æ–º–∏–Ω–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –¥–≤–∏–≥–∞—Ç–µ–ª—è –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
- –û–±–µ—Å–ø–µ—á—å—Ç–µ –Ω–∞–¥–µ–∂–Ω–æ–µ –∫—Ä–µ–ø–ª–µ–Ω–∏–µ –¥–≤–∏–≥–∞—Ç–µ–ª—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏ –≤ —Ü–µ–ø–∏ –ø–∏—Ç–∞–Ω–∏—è
- –ù–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –±–µ–∑ –ø—Ä–∏—Å–º–æ—Ç—Ä–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —Å–∫–æ—Ä–æ—Å—Ç—è—Ö