# ESP32 HID Host –¥–ª—è Arduino IDE

–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞ bluetooth2brushless –¥–ª—è Arduino IDE, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏ ESP-IDF —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HID Host API.

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å ESP-IDF –≤–µ—Ä—Å–∏–µ–π** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ HID Host API
- **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ HID —Å–æ–±—ã—Ç–∏–π** –æ—Ç –ø—É–ª—å—Ç–∞ BT13
- **–¢–æ—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π** —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ—Ç–æ—Ä–∞** –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ (10 —Å–µ–∫—É–Ω–¥)
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∑–∞–¥–∞—á–µ FreeRTOS

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ESP32 Arduino Core 2.0.0+** –≤ Arduino IDE
2. –û—Ç–∫—Ä–æ–π—Ç–µ `bluetooth2brushless_hid_client.ino` –≤ Arduino IDE
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞—Ç—É: **ESP32 Dev Module**
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Ä—Ç ESP32
5. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–≥—Ä—É–∑–∏—Ç—å"**

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **ESP32 Arduino Core –≤–µ—Ä—Å–∏–∏ 2.0.0 –∏–ª–∏ –≤—ã—à–µ**
- Arduino IDE 1.8.x –∏–ª–∏ 2.x
- ESP32 —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Classic Bluetooth (–Ω–µ —Ç–æ–ª—å–∫–æ BLE)

## üìÅ –§–∞–π–ª—ã

- `bluetooth2brushless_hid_client.ino` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ (–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω)
- `arduino_config.txt` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Arduino IDE
- `README.md` - —ç—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```
ESP32 GPIO 25 ‚Üí ESC PWM –≤—Ö–æ–¥ (—Å–∫–æ—Ä–æ—Å—Ç—å)
ESP32 GPIO 26 ‚Üí ESC —Ä–µ–≤–µ—Ä—Å (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
ESP32 GPIO 2  ‚Üí LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π)
ESP32 GND     ‚Üí ESC GND
```

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ BT13

### HID Usage –∫–æ–¥—ã
- **0x0004** - –ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ + (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞ 10%)
- **0x0008** - –ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ - (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞ 10%)
- **0x0010** - –ö–Ω–æ–ø–∫–∞ STOP (–ø–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞)
- **0x0001** - –î–ª–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ + (100% –≤–ø–µ—Ä–µ–¥)
- **0x0002** - –î–ª–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ - (100% –Ω–∞–∑–∞–¥)

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
- **+ –∫–æ—Ä–æ—Ç–∫–æ–µ** ‚Üí +1 —É—Ä–æ–≤–µ–Ω—å (10%)
- **- –∫–æ—Ä–æ—Ç–∫–æ–µ** ‚Üí -1 —É—Ä–æ–≤–µ–Ω—å (10%), –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- **+ –¥–ª–∏–Ω–Ω–æ–µ** ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–æ 100% –≤–ø–µ—Ä–µ–¥
- **- –¥–ª–∏–Ω–Ω–æ–µ** ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–æ 100% –Ω–∞–∑–∞–¥
- **–û—Ç–ø—É—Å–∫–∞–Ω–∏–µ –¥–ª–∏–Ω–Ω–æ–≥–æ** ‚Üí –ø–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- **–°—Ä–µ–¥–Ω—è—è –∫–Ω–æ–ø–∫–∞** ‚Üí –ø–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

### –£—Ä–æ–≤–Ω–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
- **–î–∏–∞–ø–∞–∑–æ–Ω**: –æ—Ç -10 –¥–æ +10 (21 —É—Ä–æ–≤–µ–Ω—å)
- **0**: –û—Å—Ç–∞–Ω–æ–≤–∫–∞
- **+1 –¥–æ +10**: –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥ (10% –¥–æ 100%)
- **-1 –¥–æ -10**: –î–≤–∏–∂–µ–Ω–∏–µ –Ω–∞–∑–∞–¥ (10% –¥–æ 100%)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### MAC –∞–¥—Ä–µ—Å –ø—É–ª—å—Ç–∞ BT13
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `8B:EB:75:4E:65:97`

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ:
```cpp
static esp_bd_addr_t bt13_addr = {0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97};
```

### –ü–∏–Ω—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ:
```cpp
#define MOTOR_SPEED_PIN     25
#define MOTOR_DIR_PIN       26
#define LED_PIN             2
```

## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏ ESP32 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–∏—Å–∫ –ø—É–ª—å—Ç–∞
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- –ï—Å–ª–∏ —Å–≤—è–∑—å —Å –ø—É–ª—å—Ç–æ–º –ø–æ—Ç–µ—Ä—è–Ω–∞ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 10 —Å–µ–∫—É–Ω–¥, –¥–≤–∏–≥–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–ª—É—á–∞–π–Ω–æ–º –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –ø—É–ª—å—Ç–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –û—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞ FreeRTOS –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ–∏—Å–∫–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üí° –ò–Ω–¥–∏–∫–∞—Ü–∏—è LED

- **–í—ã–∫–ª—é—á–µ–Ω**: –ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø—É–ª—å—Ç—É
- **–ú–µ–¥–ª–µ–Ω–Ω–æ–µ –º–∏–≥–∞–Ω–∏–µ (1 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É)**: –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ –ø—É–ª—å—Ç—É, –¥–≤–∏–≥–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- **–ë—ã—Å—Ç—Ä–æ–µ –º–∏–≥–∞–Ω–∏–µ (5 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É)**: –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ –ø—É–ª—å—Ç—É, –¥–≤–∏–≥–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- **3 –±—ã—Å—Ç—Ä—ã—Ö –≤—Å–ø—ã—à–∫–∏**: –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø—É–ª—å—Ç—É
- **5 –±—ã—Å—Ç—Ä—ã—Ö –≤—Å–ø—ã—à–µ–∫**: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç –ø—É–ª—å—Ç–∞
- **10 –±—ã—Å—Ç—Ä—ã—Ö –≤—Å–ø—ã—à–µ–∫**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ—Ç–æ—Ä–∞

## üêõ –û—Ç–ª–∞–¥–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ Serial Monitor (115200 baud) –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã
- –ü–æ–∏—Å–∫–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø—É–ª—å—Ç—É
- HID —Å–æ–±—ã—Ç–∏–π –∏ –∫–æ–º–∞–Ω–¥
- –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–≤–∏–≥–∞—Ç–µ–ª—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞
```
=== ESP32 HID Host Motor Control ===
System initialization...
Motor initialized
Bluetooth initialized
Searching for BT13 remote (MAC: 8B:EB:75:4E:65:97)...
Found BT13! Stopping discovery...
BT13 connected successfully!
HID Usage: 0x0004
Command: Short + (increase level)
Short +: Speed level = 1 (10% forward)
Running forward at 10%
```

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ESP32 Arduino Core –≤–µ—Ä—Å–∏–∏ 2.0.0 –∏–ª–∏ –≤—ã—à–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–ª–∞—Ç–∞ ESP32

### –ù–µ —É–¥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –ø—É–ª—å—Ç BT13
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É–ª—å—Ç –≤–∫–ª—é—á–µ–Ω –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —Å–æ–ø—Ä—è–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å MAC –∞–¥—Ä–µ—Å–∞ –≤ –∫–æ–¥–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É–ª—å—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –¥—Ä—É–≥–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É

### –î–≤–∏–≥–∞—Ç–µ–ª—å –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–æ–≤ –∫ –ø–∏–Ω–∞–º 25 –∏ 26
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥—Ä–∞–π–≤–µ—Ä –¥–≤–∏–≥–∞—Ç–µ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ESP32 –ø–æ–ª—É—á–∞–µ—Ç HID —Å–æ–±—ã—Ç–∏—è (—Å–º–æ—Ç—Ä–∏—Ç–µ Serial Monitor)

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: Bluetooth Classic HID Host
- **–ü—Ä–æ—Ñ–∏–ª—å**: HID (Human Interface Device)
- **–î–∞–ª—å–Ω–æ—Å—Ç—å**: –î–æ 10 –º–µ—Ç—Ä–æ–≤
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç—å—é**: 21 —É—Ä–æ–≤–µ–Ω—å (-10 –¥–æ +10)
- **PWM —á–∞—Å—Ç–æ—Ç–∞**: 1 –∫–ì—Ü
- **PWM —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ**: 8 –±–∏—Ç (0-255)
- **–¢–∞–π–º–∞—É—Ç –¥–ª–∏–Ω–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è**: 200 –º—Å
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞**: 10 —Å–µ–∫—É–Ω–¥ –±–µ–∑ —Å–≤—è–∑–∏
- **–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

## üÜö –û—Ç–ª–∏—á–∏—è –æ—Ç ESP-IDF –≤–µ—Ä—Å–∏–∏

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Arduino —Ñ—É–Ω–∫—Ü–∏–∏ (`Serial.println`, `millis()`, `delay()`)
- –°–æ–≤–º–µ—Å—Ç–∏–º —Å Arduino IDE –∏ –µ–≥–æ —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å ESP-IDF –≤–µ—Ä—Å–∏–∏
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∞

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.