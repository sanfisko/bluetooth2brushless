# ESP32 HID Host Motor Control - Arduino Core 3.x

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ—Å—â–µ—Ç–æ—á–Ω—ã–º –¥–≤–∏–≥–∞—Ç–µ–ª–µ–º —á–µ—Ä–µ–∑ Bluetooth HID –ø—É–ª—å—Ç BT13, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è **ESP32 Arduino Core 3.x** —Å –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è Bluetooth.

## ‚ö° –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **Arduino Core 3.x**: –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–æ–≤—ã–º API
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∏ Bluetooth**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ **–ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö Bluetooth
- ‚úÖ **HID Host API**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ HID —Å–æ–±—ã—Ç–∏–π –æ—Ç –ø—É–ª—å—Ç–∞ BT13
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ—Ç–æ—Ä–∞ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏
- ‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- ESP32 —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Classic Bluetooth
- –ë–µ—Å—â–µ—Ç–æ—á–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º
- –ü—É–ª—å—Ç BT13 (–∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π HID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- **Arduino IDE**: 2.0.0+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2.3.x)
- **ESP32 Arduino Core**: 3.0.0+ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
- **URL –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–ª–∞—Ç**: `https://espressif.github.io/arduino-esp32/package_esp32_index.json`

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Arduino IDE
```
1. –°–∫–∞—á–∞–π—Ç–µ Arduino IDE 2.0.0+ —Å https://www.arduino.cc/en/software
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ ESP32 Core 3.x
```
1. –§–∞–π–ª ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ URL –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –ø–ª–∞—Ç
2. –î–æ–±–∞–≤—å—Ç–µ: https://espressif.github.io/arduino-esp32/package_esp32_index.json
3. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ‚Üí –ü–ª–∞—Ç–∞ ‚Üí –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–ª–∞—Ç
4. –ù–∞–π–¥–∏—Ç–µ "ESP32" ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é 3.0.0+
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç—ã
```
–ü–ª–∞—Ç–∞: ESP32 Dev Module
Upload Speed: 921600
CPU Frequency: 240MHz (WiFi/BT)
Flash Frequency: 80MHz
Flash Mode: QIO
Flash Size: 4MB (32Mb)
Partition Scheme: Default 4MB with spiffs
Core Debug Level: Info
USB CDC On Boot: Disabled
```

### 4. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–∞
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ bluetooth2brushless.ino
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ ESP32 –∫ USB
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç
4. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å"
```

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
ESP32 Pin    ‚Üí    –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
GPIO 25      ‚Üí    PWM —Å–∏–≥–Ω–∞–ª —Å–∫–æ—Ä–æ—Å—Ç–∏ (–∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É –º–æ—Ç–æ—Ä–∞)
GPIO 26      ‚Üí    –°–∏–≥–Ω–∞–ª –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É –º–æ—Ç–æ—Ä–∞)
GPIO 2       ‚Üí    LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è
GND          ‚Üí    –û–±—â–∏–π –ø—Ä–æ–≤–æ–¥
3.3V/5V      ‚Üí    –ü–∏—Ç–∞–Ω–∏–µ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞)
```

### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –º–æ—Ç–æ—Ä–∞
```
PWM –≤—Ö–æ–¥     ‚Üê    GPIO 25 (—Å–∫–æ—Ä–æ—Å—Ç—å 0-255)
DIR –≤—Ö–æ–¥     ‚Üê    GPIO 26 (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: HIGH=–≤–ø–µ—Ä–µ–¥, LOW=–Ω–∞–∑–∞–¥)
GND          ‚Üê    GND ESP32
VCC          ‚Üê    –í–Ω–µ—à–Ω–µ–µ –ø–∏—Ç–∞–Ω–∏–µ –º–æ—Ç–æ—Ä–∞
```

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—É–ª—å—Ç BT13
| –ö–Ω–æ–ø–∫–∞ | –î–µ–π—Å—Ç–≤–∏–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|--------|----------|-----------|
| **+** (–∫–æ—Ä–æ—Ç–∫–æ–µ) | –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ | +10% –∫ —Ç–µ–∫—É—â–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ |
| **-** (–∫–æ—Ä–æ—Ç–∫–æ–µ) | –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ | -10% –æ—Ç —Ç–µ–∫—É—â–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ |
| **+** (–¥–ª–∏–Ω–Ω–æ–µ) | –ú–∞–∫—Å–∏–º—É–º –≤–ø–µ—Ä–µ–¥ | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ 100% –≤–ø–µ—Ä–µ–¥ |
| **-** (–¥–ª–∏–Ω–Ω–æ–µ) | –ú–∞–∫—Å–∏–º—É–º –Ω–∞–∑–∞–¥ | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ 100% –Ω–∞–∑–∞–¥ |
| **STOP** | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ | –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ—Ç–æ—Ä–∞ |

### –õ–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–î–∏–∞–ø–∞–∑–æ–Ω —Å–∫–æ—Ä–æ—Å—Ç–∏**: -10 –¥–æ +10 (0 = –æ—Å—Ç–∞–Ω–æ–≤–∫–∞)
- **–®–∞–≥ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: 10% (25 PWM –µ–¥–∏–Ω–∏—Ü)
- **–î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ –±–µ–∑ —Å–≤—è–∑–∏

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Serial Monitor (115200 baud)

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
```
=== ESP32 HID Host Motor Control v3.x ===
System initialization...
Initializing motor PWM...
PWM initialized successfully
Motor initialization completed
Motor initialized
Checking Bluetooth state...
BT Controller status: 0
BT Controller: IDLE (not initialized)
Bluedroid status: 0
Bluedroid: UNINITIALIZED
Bluetooth state check completed
Starting Bluetooth initialization...
Initializing BT controller...
BT controller initialized
Enabling BT controller...
BT controller enabled
Initializing Bluedroid...
Bluedroid initialized
Enabling Bluedroid...
Bluedroid enabled
Registering GAP callback...
Initializing HID Host...
Bluetooth initialization completed successfully
```

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—É–ª—å—Ç–∞
```
Found device: 8b:eb:75:4e:65:97
Found BT13! Stopping discovery...
Connecting to BT13...
HID Host event: unknown (ID: 0)
BT13 connected successfully!
Ready to receive commands from remote
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–æ–º
```
HID data (2 bytes): 04 00 
HID Usage: 0x0004
Command: Short + (increase level)
Short +: Speed level = 1 (10% forward)
State: ON | Level: 1/10 | PWM: 25/255 | Direction: FORWARD
Running forward at 10%
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è Bluetooth
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ Bluetooth:
```cpp
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
BT Controller status: 0-3
0 = IDLE (–Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω)
1 = INITED (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω)
2 = ENABLED (–≤–∫–ª—é—á–µ–Ω)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ Bluedroid
Bluedroid status: 0-2
0 = UNINITIALIZED (–Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω)
1 = INITIALIZED (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω)
2 = ENABLED (–≤–∫–ª—é—á–µ–Ω)
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
```
WARNING: Bluetooth state changed, marking as disabled
WARNING: Bluetooth not enabled, attempting restart...
Bluetooth restarted successfully
```

### –ò–Ω–¥–∏–∫–∞—Ü–∏—è LED
- **–ë—ã—Å—Ç—Ä–æ–µ –º–∏–≥–∞–Ω–∏–µ** (100–º—Å): –ú–æ—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ú–µ–¥–ª–µ–Ω–Ω–æ–µ –º–∏–≥–∞–Ω–∏–µ** (500–º—Å): –ü–æ–¥–∫–ª—é—á–µ–Ω, –º–æ—Ç–æ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- **–ù–µ—Ç –º–∏–≥–∞–Ω–∏—è**: –ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ø—É–ª—å—Ç–æ–º
- **3 –±—ã—Å—Ç—Ä—ã—Ö –≤—Å–ø—ã—à–∫–∏**: –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- **5 –±—ã—Å—Ç—Ä—ã—Ö –≤—Å–ø—ã—à–µ–∫**: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—É–ª—å—Ç–∞
- **10 –¥–ª–∏–Ω–Ω—ã—Ö –≤—Å–ø—ã—à–µ–∫**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

## ‚ö†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

#### "ledcSetup was not declared"
```
–ü—Ä–∏—á–∏–Ω–∞: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π Arduino Core 2.x
–†–µ—à–µ–Ω–∏–µ: –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ Arduino Core 3.0.0+
```

#### "esp_hidh.h: No such file or directory"
```
–ü—Ä–∏—á–∏–Ω–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è Arduino Core
–†–µ—à–µ–Ω–∏–µ: 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–ª–∞—Ç
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ESP32 Arduino Core 3.0.0+
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Arduino IDE
```

#### "BT_CONTROLLER_INIT_CONFIG_DEFAULT was not declared"
```
–ü—Ä–∏—á–∏–Ω–∞: –ù–µ–ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Arduino Core
–†–µ—à–µ–Ω–∏–µ:
1. –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Arduino Core 3.0.0+
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Bluetooth

#### "Bluetooth initialization failed"
```
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Serial Monitor –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
- BT Controller status
- Bluedroid status
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–†–µ—à–µ–Ω–∏—è:
1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ ESP32
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ESP32 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Classic BT
```

#### "Cannot start scan: Bluetooth not enabled"
```
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Bluetooth.
–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–∏—Ç–∞–Ω–∏—è ESP32
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π ESP32
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –ª–∏ –¥—Ä—É–≥–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ Bluetooth
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

#### –ü—É–ª—å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
```
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É–ª—å—Ç –≤–∫–ª—é—á–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MAC –∞–¥—Ä–µ—Å –≤ –∫–æ–¥–µ:
   static esp_bd_addr_t bt13_addr = {0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97};
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É–ª—å—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –¥—Ä—É–≥–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å ESP32 –∏ –ø—É–ª—å—Ç
```

#### –ß–∞—Å—Ç—ã–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
```
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É ESP32 –∏ –ø—É–ª—å—Ç–æ–º
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–º–µ—Ö (WiFi, –¥—Ä—É–≥–∏–µ BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–∏—Ç–∞–Ω–∏—è ESP32
4. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ MAC –∞–¥—Ä–µ—Å–∞ –ø—É–ª—å—Ç–∞
```cpp
// –ù–∞–π–¥–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É –≤ –∫–æ–¥–µ:
static esp_bd_addr_t bt13_addr = {0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97};

// –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ MAC –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –ø—É–ª—å—Ç–∞ –í –û–ë–†–ê–¢–ù–û–ú –ü–û–†–Ø–î–ö–ï
// –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ MAC –ø—É–ª—å—Ç–∞ AA:BB:CC:DD:EE:FF, —Ç–æ:
static esp_bd_addr_t bt13_addr = {0xFF, 0xEE, 0xDD, 0xCC, 0xBB, 0xAA};
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∏–Ω–æ–≤
```cpp
// –ù–∞–π–¥–∏—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ–¥–µ:
#define MOTOR_SPEED_PIN     25  // PWM –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
#define MOTOR_DIR_PIN       26  // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
#define LED_PIN             2   // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä

// –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—ã–µ –ø–∏–Ω—ã
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–æ—Ç–æ—Ä–∞
```cpp
// –ù–∞–π–¥–∏—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
static const int max_speed_level = 10;   // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (1-20)
static const int pwm_per_level = 25;     // PWM –Ω–∞ —É—Ä–æ–≤–µ–Ω—å (1-50)

// –ò–∑–º–µ–Ω–∏—Ç–µ –¥–ª—è –≤–∞—à–µ–≥–æ –º–æ—Ç–æ—Ä–∞
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **RAM**: ~50KB (–≤–∫–ª—é—á–∞—è —Å—Ç–µ–∫ FreeRTOS)
- **Flash**: ~1.2MB (–≤–∫–ª—é—á–∞—è Arduino Core)
- **CPU**: ~5% –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ

### –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞
- **HID —Å–æ–±—ã—Ç–∏—è**: <10–º—Å
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏**: <20–º—Å
- **–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: 3-10 —Å–µ–∫—É–Ω–¥
- **–ê–≤—Ç–æ–æ—Å—Ç–∞–Ω–æ–≤–∫–∞**: 10 —Å–µ–∫—É–Ω–¥

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –í–µ—Ä—Å–∏—è 3.x (—Ç–µ–∫—É—â–∞—è)
- ‚úÖ Arduino Core 3.x API
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è Bluetooth
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- üîÑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—É–ª—å—Ç–æ–≤
- üîÑ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- üîÑ OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- üîÑ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ EEPROM

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `bluetooth2brushless.ino` - –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã
- `arduino_config_v3.txt` - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Arduino IDE
- `ARDUINO_v3_CHANGELOG.md` - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `README_v3.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

### –û—Ç–ª–∞–¥–∫–∞
1. –í–∫–ª—é—á–∏—Ç–µ Core Debug Level = Info
2. –û—Ç–∫—Ä–æ–π—Ç–µ Serial Monitor (115200 baud)
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ ESP32
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ª–æ–≥ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å Classic Bluetooth (–Ω–µ BLE)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–¥–∏–Ω –ø—É–ª—å—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –¢—Ä–µ–±—É–µ—Ç ESP32 —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –æ–±—ä–µ–º–æ–º –ø–∞–º—è—Ç–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Pull Request –∏–ª–∏ Issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

---

**–í–µ—Ä—Å–∏—è**: 3.x  
**–î–∞—Ç–∞**: 2025-06-10  
**–ê–≤—Ç–æ—Ä**: OpenHands  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: ESP32 Arduino Core 3.0.0+