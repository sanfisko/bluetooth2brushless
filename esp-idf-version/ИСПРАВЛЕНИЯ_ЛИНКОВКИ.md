# Исправление ошибки линковки ESP-IDF v5.4.1

## Проблема
После исправления ошибок компиляции возникла ошибка линковки:
```
undefined reference to `esp_hid_gap_init'
```

## Причина
Файл `esp_hid_gap.c` содержит реализацию функции `esp_hid_gap_init`, но не был включен в процесс сборки из-за неполного файла `CMakeLists.txt`.

## Исправление

### Файл: `main/CMakeLists.txt`

**Было:**
```cmake
idf_component_register(SRCS "main.c"
                    INCLUDE_DIRS ".")
```

**Стало:**
```cmake
idf_component_register(SRCS "main.c" "esp_hid_gap.c"
                    INCLUDE_DIRS ".")
```

## Объяснение
- Файл `esp_hid_gap.c` содержит пользовательскую реализацию HID GAP функций
- Функция `esp_hid_gap_init()` определена в строке 1104 файла `esp_hid_gap.c`
- CMake должен знать о всех исходных файлах для их компиляции и линковки
- Без указания `esp_hid_gap.c` в `SRCS`, файл не компилировался и функция была недоступна

## Полный список исправлений

### 1. `main/main.c` (строка 113)
```c
// Было: ESP_ERROR_CHECK(esp_hid_gap_init(ESP_HID_MODE_CLASSIC_BT));
// Стало: ESP_ERROR_CHECK(esp_hid_gap_init(HID_HOST_MODE));
```

### 2. `main/main.c` (строка 370)
```c
// Было: esp_bt_gap_dev_prop_t *p;
// Стало: (удалено)
```

### 3. `main/CMakeLists.txt`
```cmake
// Было: idf_component_register(SRCS "main.c" INCLUDE_DIRS ".")
// Стало: idf_component_register(SRCS "main.c" "esp_hid_gap.c" INCLUDE_DIRS ".")
```

## Проверка
После всех исправлений выполните:
```bash
cd ~/bluetooth2brushless/esp-idf-version
. ~/esp/esp-idf/export.sh
idf.py fullclean
idf.py build
```

## Статус
✅ **ВСЕ ОШИБКИ ИСПРАВЛЕНЫ**
- Ошибки компиляции устранены
- Ошибки линковки устранены  
- Проект готов к сборке с ESP-IDF v5.4.1