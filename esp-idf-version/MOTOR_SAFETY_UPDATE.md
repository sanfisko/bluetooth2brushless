# Обновление безопасности мотора

## Новая функциональность

### Автоматическая остановка мотора при потере соединения

**Проблема:** Если пульт управления BT13 теряет соединение с ESP32, мотор может продолжать работать бесконечно, что создает угрозу безопасности.

**Решение:** Добавлена автоматическая остановка мотора через 10 секунд после потери Bluetooth соединения.

## Как это работает

1. **Отслеживание соединения:** Система отслеживает время отключения от пульта BT13
2. **Таймер безопасности:** Если соединение отсутствует более 10 секунд, мотор автоматически останавливается
3. **Визуальная индикация:** LED мигает 10 раз при автоматической остановке
4. **Логирование:** В консоль выводится предупреждение с указанием времени отключения

## Технические детали

### Новые переменные:
```c
static uint32_t disconnection_start_time = 0;
static const uint32_t MOTOR_STOP_TIMEOUT_MS = 10000; // 10 секунд
```

### Логика работы:
- При подключении BT13: `disconnection_start_time = 0`
- При отключении BT13: `disconnection_start_time = текущее_время`
- Каждые 500мс проверяется: `текущее_время - disconnection_start_time >= 10000мс`
- Если условие выполнено и мотор работает → автоматическая остановка

### Сообщения в логе:
```
W (xxxxx) BT13_MOTOR_CONTROL: ⚠️  Мотор остановлен автоматически: нет соединения 10 секунд
```

## Преимущества

✅ **Безопасность:** Предотвращает бесконечную работу мотора при потере пульта  
✅ **Автоматизм:** Не требует вмешательства пользователя  
✅ **Индикация:** Четкая визуальная и текстовая индикация события  
✅ **Настраиваемость:** Время ожидания легко изменить в константе `MOTOR_STOP_TIMEOUT_MS`  

## Тестирование

Для проверки функциональности:

1. Запустите мотор через пульт BT13
2. Выключите пульт или выйдите из зоны действия Bluetooth
3. Через 10 секунд мотор должен автоматически остановиться
4. LED должен мигнуть 10 раз
5. В логе должно появиться предупреждение

## Совместимость

- ✅ ESP-IDF v5.4.1
- ✅ Пульт BT13 (MAC: 8B:EB:75:4E:65:97)
- ✅ Все существующие функции управления мотором

Обновление полностью обратно совместимо и не влияет на существующую функциональность.