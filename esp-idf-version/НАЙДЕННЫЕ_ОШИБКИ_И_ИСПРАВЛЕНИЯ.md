# üîç –ù–ê–ô–î–ï–ù–ù–´–ï –û–®–ò–ë–ö–ò –ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø ESP-IDF –í–ï–†–°–ò–ò

## üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
–ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ ESP-IDF –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ bluetooth2brushless. –ù–∞–π–¥–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 8 –æ—à–∏–±–æ–∫ —Ä–∞–∑–ª–∏—á–Ω–æ–π –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏.

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)

### ‚ùå –û—à–∏–±–∫–∞ 1: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `long_press_active`
**–§–∞–π–ª**: `main/main.c`  
**–°—Ç—Ä–æ–∫–∏**: 49 –∏ 60  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `long_press_active` –æ–±—ä—è–≤–ª–µ–Ω–∞ –¥–≤–∞–∂–¥—ã, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—à–∏–±–∫–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ‚úÖ –£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫–µ 60.

### ‚ùå –û—à–∏–±–∫–∞ 2: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ HID –∫–æ–¥–∞ `0x0002`
**–§–∞–π–ª**: `main/main.c`  
**–ü—Ä–æ–±–ª–µ–º–∞**: –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ `EXAMPLE_OUTPUT.md` —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –∫–æ–¥ `02 00` –¥–ª—è –∫–Ω–æ–ø–∫–∏ "-", –Ω–æ –≤ –∫–æ–¥–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –µ–≥–æ –Ω–µ—Ç.  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–¥ `0x0002` –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–Ω–æ–ø–∫–∏ "-".

### ‚ùå –û—à–∏–±–∫–∞ 3: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—à–∏–±–æ–∫ `esp_hidh_dev_open`
**–§–∞–π–ª**: `main/main.c`  
**–°—Ç—Ä–æ–∫–∞**: 480  
**–ü—Ä–æ–±–ª–µ–º–∞**: –§—É–Ω–∫—Ü–∏—è `esp_hidh_dev_open` –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è.  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫.

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´ –°–†–ï–î–ù–ï–ô –ö–†–ò–¢–ò–ß–ù–û–°–¢–ò (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)

### ‚ùå –û—à–∏–±–∫–∞ 4: –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `saved_speed_level`
**–§–∞–π–ª**: `main/main.c`  
**–°—Ç—Ä–æ–∫–∏**: 60, 289, 301  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±—ä—è–≤–ª–µ–Ω–∞ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏.  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ.

### ‚ùå –û—à–∏–±–∫–∞ 5: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è BLE
**–§–∞–π–ª**: `sdkconfig.defaults`  
**–°—Ç—Ä–æ–∫–∞**: 21  
**–ü—Ä–æ–±–ª–µ–º–∞**: `CONFIG_BT_BLE_DYNAMIC_ENV_MEMORY=y` –≤–∫–ª—é—á–µ–Ω, –Ω–æ BLE –æ—Ç–∫–ª—é—á–µ–Ω (`CONFIG_BT_BLE_ENABLED=n`).  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ‚úÖ –û–ø—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞ —Å –ø–æ—è—Å–Ω–∏—Ç–µ–ª—å–Ω—ã–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º.

### ‚ùå –û—à–∏–±–∫–∞ 6: –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
**–§–∞–π–ª**: `main/main.c`  
**–°—Ç—Ä–æ–∫–∞**: 115  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π "–ù–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å BLE" –Ω–µ–∞–∫—Ç—É–∞–ª–µ–Ω, —Ç–∞–∫ –∫–∞–∫ BLE –æ—Ç–∫–ª—é—á–µ–Ω.  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω.

## üìù –û–®–ò–ë–ö–ò –í –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)

### ‚ùå –û—à–∏–±–∫–∞ 7: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ HID –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª**: `HID_DATA_PROCESSING_FIX.md`  
**–°—Ç—Ä–æ–∫–∞**: 55  
**–ü—Ä–æ–±–ª–µ–º–∞**: –£–∫–∞–∑–∞–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö `[Report ID] [Usage Low] [Usage High]` –∏ –ø–∞—Ä—Å–∏–Ω–≥ `(data[2] << 8) | data[1]`.  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `[Usage Low] [Usage High]` –∏ –ø–∞—Ä—Å–∏–Ω–≥ `(data[1] << 8) | data[0]`.

### ‚ùå –û—à–∏–±–∫–∞ 8: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ EXAMPLE_OUTPUT.md
**–§–∞–π–ª**: `EXAMPLE_OUTPUT.md`  
**–°—Ç—Ä–æ–∫–∏**: 85-88  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–¥—ã `04 00`, `08 00`, `10 00`, `01 00` –≤—Å–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω—ã –∫–∞–∫ "–ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ +", –Ω–æ `08 00` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "-".  
**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º –ø—É–ª—å—Ç–æ–º BT13 –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤.

## ‚úÖ –ü–†–û–í–ï–†–ï–ù–ù–´–ï –ê–°–ü–ï–ö–¢–´ (–±–µ–∑ –æ—à–∏–±–æ–∫)

### üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–π –ª–æ–≥–∏—á–Ω–∞
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ–±–ª—é–¥–µ–Ω–æ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

### üîó –õ–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ—Ä–æ—Ç–∫–∏—Ö/–¥–ª–∏–Ω–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ESP-IDF
- ‚úÖ Bluetooth Classic –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ HID Host –≤–∫–ª—é—á–µ–Ω
- ‚úÖ GPIO –∏ LEDC –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏

## üöÄ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º –ø—É–ª—å—Ç–æ–º BT13 –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ HID –∫–æ–¥–æ–≤ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –†–∞–±–æ—Ç—ã –ª–æ–≥–∏–∫–∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö/–¥–ª–∏–Ω–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### 2. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å watchdog timer –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ NVS
- –î–æ–±–∞–≤–∏—Ç—å –∫–∞–ª–∏–±—Ä–æ–≤–∫—É PWM –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ ESC

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫
- –î–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è Bluetooth

## üìä –°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê

üü¢ **–ì–û–¢–û–í –ö –ö–û–ú–ü–ò–õ–Ø–¶–ò–ò –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –ü—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å ESP-IDF v5.4.1 –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—É–ª—å—Ç–æ–º BT13.

## üîß –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò

```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd esp-idf-version

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è ESP-IDF
. ~/esp/esp-idf/export.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
idf.py menuconfig

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
idf.py build

# –ü—Ä–æ—à–∏–≤–∫–∞ (–µ—Å–ª–∏ ESP32 –ø–æ–¥–∫–ª—é—á–µ–Ω)
idf.py -p /dev/ttyUSB0 flash monitor
```

---
**–ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω**: 2025-06-10  
**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç**: OpenHands AI  
**–í–µ—Ä—Å–∏—è ESP-IDF**: 5.4.1  
**–°—Ç–∞—Ç—É—Å**: –í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã ‚úÖ