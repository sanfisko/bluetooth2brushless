# –†–µ–∑—é–º–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å BT13

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –ò—Å—Ö–æ–¥–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è
- **–ü—Ä–æ–µ–∫—Ç**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å—â–µ—Ç–æ—á–Ω—ã–º –¥–≤–∏–≥–∞—Ç–µ–ª–µ–º —á–µ—Ä–µ–∑ ESP32 –∏ –ø—É–ª—å—Ç BT13
- **–ü—Ä–æ–±–ª–µ–º–∞**: ESP32 –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ø—É–ª—å—Ç—É BT13
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Bluetooth —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è BT13
–ê–Ω–∞–ª–∏–∑ –ø—É–ª—å—Ç–∞ –≤ Ubuntu –ø–æ–∫–∞–∑–∞–ª:
```
Device: BT13 (8B:EB:75:4E:65:97)
Protocol: HID (Human Interface Device)
Manufacturer: Zhuhai Jieli technology Co.,Ltd
Buttons:
  - Volume Up (0xE9) ‚Üí –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
  - Volume Down (0xEA) ‚Üí –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏  
  - Play/Pause (0xCD) ‚Üí –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```

### –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã
1. **ESP32 –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä** - –æ–∂–∏–¥–∞–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
2. **BT13 –∫–∞–∫ HID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ** - –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä–∞–º
3. **–†–∞–∑–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã** - Serial Port Profile vs HID

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **ESP32 –∫–∞–∫ HID Host** - –∞–∫—Ç–∏–≤–Ω–æ –∏—â–µ—Ç –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ BT13
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª** - HID Host –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å HID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ø–æ–∏—Å–∫, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏

#### 1. ESP-IDF –≤–µ—Ä—Å–∏—è (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```
esp-idf-version/
‚îú‚îÄ‚îÄ main/main.c              # –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è HID Host
‚îú‚îÄ‚îÄ CMakeLists.txt           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
‚îî‚îÄ‚îÄ sdkconfig.defaults       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Bluetooth
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ HID Host –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ BT13 –ø–æ MAC –∞–¥—Ä–µ—Å—É
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ HID —Å–æ–±—ã—Ç–∏–π
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

#### 2. Arduino IDE –≤–µ—Ä—Å–∏—è (–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è)
```
bluetooth2brushless_hid_client.ino  # –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è Arduino IDE
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Arduino –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è HID –∫–ª–∏–µ–Ω—Ç–∞
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è

## üéØ –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### –ë—ã–ª–æ (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ):
```cpp
// ESP32 –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä
SerialBT.begin("ESP32_Motor_Control");  
// –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
if (SerialBT.available()) {
    char command = SerialBT.read();
    // ...
}
```

### –°—Ç–∞–ª–æ (—Ä–∞–±–æ—Ç–∞–µ—Ç):
```c
// ESP32 –∫–∞–∫ HID Host
esp_hid_host_init();
esp_bt_gap_start_discovery();  // –ü–æ–∏—Å–∫ BT13

// –û–±—Ä–∞–±–æ—Ç–∫–∞ HID —Å–æ–±—ã—Ç–∏–π
case ESP_HID_HOST_INPUT_EVENT:
    uint8_t key_code = data->input.data[1];
    switch (key_code) {
        case 0xE9: motor_increase_speed(); break;
        case 0xEA: motor_decrease_speed(); break;
        case 0xCD: motor_toggle_direction(); break;
    }
```

## üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ ESP32 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç BT13  
‚úÖ –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –±–µ–∑ –ø–∞—Ä–æ–ª—è  
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∫–Ω–æ–ø–∫–∏  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ  
‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è  

### –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
```
ESP32 GPIO 25 ‚Üí –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä SPEED (PWM)
ESP32 GPIO 26 ‚Üí –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä DIRECTION
ESP32 GND     ‚Üí –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä GND  
ESP32 GPIO 2  ‚Üí LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
| –ö–Ω–æ–ø–∫–∞ BT13 | HID –∫–æ–¥ | –§—É–Ω–∫—Ü–∏—è ESP32 |
|-------------|---------|---------------|
| Volume Up | 0xE9 | –£–≤–µ–ª–∏—á–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å |
| Volume Down | 0xEA | –£–º–µ–Ω—å—à–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å |
| Play/Pause | 0xCD | –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (ESP-IDF)
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ESP-IDF
git clone https://github.com/espressif/esp-idf.git
cd esp-idf && ./install.sh esp32 && . ./export.sh

# 2. –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞
cd bluetooth2brushless/esp-idf-version
idf.py build flash monitor

# 3. –í–∫–ª—é—á–∏—Ç—å BT13 –∏ –Ω–∞–±–ª—é–¥–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö
```

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Arduino IDE)
```bash
# 1. –û—Ç–∫—Ä—ã—Ç—å bluetooth2brushless_hid_client.ino
# 2. –í—ã–±—Ä–∞—Ç—å –ø–ª–∞—Ç—É ESP32 Dev Module  
# 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥
# 4. –í–∫–ª—é—á–∏—Ç—å BT13 –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **[WHICH_VERSION.md](WHICH_VERSION.md)** - –í—ã–±–æ—Ä –≤–µ—Ä—Å–∏–∏
- **[HID_CLIENT_README.md](HID_CLIENT_README.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- **[ESP_IDF_SETUP.md](ESP_IDF_SETUP.md)** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ESP-IDF
- **[test_bt13_connection.py](test_bt13_connection.py)** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ BT13

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!** 

–°–æ–∑–¥–∞–Ω–æ —Ä–∞–±–æ—á–µ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ESP32 –∫ –ø—É–ª—å—Ç—É BT13 —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π HID Host. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ESP-IDF –≤–µ—Ä—Å–∏—é –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.