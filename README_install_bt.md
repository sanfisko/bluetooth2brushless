# ๐ก install_bt.sh - ะฃััะฐะฝะพะฒัะธะบ ั Bluetooth ัะบะฐะฝะธัะพะฒะฐะฝะธะตะผ

ะะฐััะธัะตะฝะฝะฐั ะฒะตััะธั ัััะฐะฝะพะฒัะธะบะฐ ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผ ะฟะพะธัะบะพะผ ะธ ะฝะฐัััะพะนะบะพะน Bluetooth ััััะพะนััะฒ.

## ๐ ะัััััะน ััะฐัั

```bash
# ะะฐะฟััะบ ัััะฐะฝะพะฒัะธะบะฐ ั Bluetooth ัะบะฐะฝะธัะพะฒะฐะฝะธะตะผ
./install_bt.sh
```

## ๐ ะะพะทะผะพะถะฝะพััะธ

### โ ะัะต ััะฝะบัะธะธ ะพัะธะณะธะฝะฐะปัะฝะพะณะพ install.sh:
- ะะฒัะพะผะฐัะธัะตัะบะฐั ัััะฐะฝะพะฒะบะฐ ESP-IDF
- ะะพะผะฟะธะปััะธั ะฟัะพะตะบัะฐ
- ะัะพัะธะฒะบะฐ ESP32
- ะะพะฝะธัะพัะธะฝะณ ัะฐะฑะพัั

### ๐ ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะฒะพะทะผะพะถะฝะพััะธ:
- **๐ Bluetooth ัะบะฐะฝะธัะพะฒะฐะฝะธะต** - ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะฟะพะธัะบ ััััะพะนััะฒ ะฒ ะพะบััะณะต
- **๐ ะกะฟะธัะพะบ ััััะพะนััะฒ** - ะฟะพะบะฐะทัะฒะฐะตั ะฒัะต ะฝะฐะนะดะตะฝะฝัะต BT ััััะพะนััะฒะฐ ั ะธะผะตะฝะฐะผะธ ะธ MAC
- **โ๏ธ ะะฒัะพะผะฐัะธัะตัะบะฐั ะฝะฐัััะพะนะบะฐ** - ะพะฑะฝะพะฒะปัะตั MAC ะฐะดัะตั ะฒ ะบะพะดะต ะฟัะพะตะบัะฐ
- **๐พ ะะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต** - ัะพะทะดะฐะตั backup ัะฐะนะปะฐ main.c ะฟะตัะตะด ะธะทะผะตะฝะตะฝะธัะผะธ

## ๐ก ะัะพัะตัั ัะฐะฑะพัั

1. **ะัะพะฒะตัะบะฐ ESP-IDF** - ะบะฐะบ ะฒ ะพัะธะณะธะฝะฐะปัะฝะพะผ ัะบัะธะฟัะต
2. **๐ ะกะบะฐะฝะธัะพะฒะฐะฝะธะต Bluetooth**:
   - ะัะพะฒะตัะบะฐ ะฝะฐะปะธัะธั bluetooth ะธะฝััััะผะตะฝัะพะฒ
   - ะะบะปััะตะฝะธะต Bluetooth ะฐะดะฐะฟัะตัะฐ
   - 15-ัะตะบัะฝะดะฝะพะต ัะบะฐะฝะธัะพะฒะฐะฝะธะต ััััะพะนััะฒ
   - ะัะพะฑัะฐะถะตะฝะธะต ัะฟะธัะบะฐ ะฝะฐะนะดะตะฝะฝัั ััััะพะนััะฒ
3. **โ๏ธ ะัะฑะพั ััััะพะนััะฒะฐ**:
   - ะะฝัะตัะฐะบัะธะฒะฝัะน ะฒัะฑะพั ะธะท ัะฟะธัะบะฐ
   - ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต MAC ะฒ ะบะพะดะต
   - ะกะพะทะดะฐะฝะธะต ัะตะทะตัะฒะฝะพะน ะบะพะฟะธะธ
4. **๐จ ะะพะผะฟะธะปััะธั ะธ ะฟัะพัะธะฒะบะฐ** - ะบะฐะบ ะฒ ะพัะธะณะธะฝะฐะปัะฝะพะผ ัะบัะธะฟัะต

## ๐๏ธ ะขัะตะฑะพะฒะฐะฝะธั

### ะกะธััะตะผะฝัะต ะฟะฐะบะตัั:
```bash
# Ubuntu/Debian
sudo apt install bluetooth bluez-tools

# CentOS/RHEL/Fedora
sudo yum install bluez bluez-tools

# macOS
brew install blueutil
```

### ะะพะดะดะตัะถะธะฒะฐะตะผัะต ะธะฝััััะผะตะฝัั:
- **blueutil** (macOS, ะพัะฝะพะฒะฝะพะน)
- **bluetoothctl** (Linux, ะพัะฝะพะฒะฝะพะน)
- **hcitool** (ัะตะทะตัะฒะฝัะน)
- **rfkill** (Linux, ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฟะธัะฐะฝะธะตะผ)

## ๐ ะัะปะธ ัะบะฐะฝะธัะพะฒะฐะฝะธะต ะฝะต ัะฐะฑะพัะฐะตั

ะกะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะตะดะปะพะถะธั **ัััะฝะพะน ะฒะฒะพะด MAC ะฐะดัะตัะฐ** ะฒ ัะปะตะดัััะธั ัะปััะฐัั:
- Bluetooth ะธะฝััััะผะตะฝัั ะฝะตะดะพัััะฟะฝั
- ะะต ัะดะฐะปะพัั ะฒะบะปััะธัั Bluetooth
- ะกะบะฐะฝะธัะพะฒะฐะฝะธะต ะฝะต ะฝะฐัะปะพ ััััะพะนััะฒะฐ

### ะะฐะบ ะฝะฐะนัะธ MAC ะฐะดัะตั BT13:
1. **ะะฐ ัะตะปะตัะพะฝะต/ะบะพะผะฟัััะตัะต**: ะะฐัััะพะนะบะธ โ Bluetooth โ ะฝะฐะนัะธ "BT13"
2. **ะ ะฝะฐัััะพะนะบะฐั BT13**: ะฝะตะบะพัะพััะต ะผะพะดะตะปะธ ะฟะพะบะฐะทัะฒะฐัั MAC ะฝะฐ ัะบัะฐะฝะต
3. **ะงะตัะตะท ะดััะณะธะต BT ัะบะฐะฝะตัั**: ะปัะฑะพะต ะฟัะธะปะพะถะตะฝะธะต ะดะปั ัะบะฐะฝะธัะพะฒะฐะฝะธั Bluetooth

## ๐ ะัะธะผะตั ัะฐะฑะพัั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         ESP32 Bluetooth Motor Control Setup (BT)            โ
โ       github.com/sanfisko/esp32-bluetooth-motor-control     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ก ะะฐัััะพะนะบะฐ Bluetooth ััััะพะนััะฒะฐ

๐ ะัะพะฒะตัะบะฐ Bluetooth ะธะฝััััะผะตะฝัะพะฒ...
โ bluetoothctl ะฝะฐะนะดะตะฝ
โ rfkill ะฝะฐะนะดะตะฝ

๐ก ะัะพะฒะตัะบะฐ ัะพััะพัะฝะธั Bluetooth...
โ Bluetooth ะณะพัะพะฒ ะบ ัะบะฐะฝะธัะพะฒะฐะฝะธั

๐ ะกะบะฐะฝะธัะพะฒะฐะฝะธะต Bluetooth ััััะพะนััะฒ...
ะะบะปััะธัะต ะฒะฐั BT13 ะฟัะปัั (ะดะพะปะณะพะต ะฝะฐะถะฐัะธะต ััะตะดะฝะตะน ะบะฝะพะฟะบะธ)
ะกะบะฐะฝะธัะพะฒะฐะฝะธะต ะทะฐะนะผะตั 15 ัะตะบัะฝะด...

โ ะะฐะนะดะตะฝะฝัะต Bluetooth ััััะพะนััะฒะฐ:

1) BT13 (8B:EB:75:4E:65:97)
2) iPhone (AA:BB:CC:DD:EE:FF)
3) Headphones (11:22:33:44:55:66)

0) ะัะพะฟัััะธัั ะธ ะธัะฟะพะปัะทะพะฒะฐัั MAC ะฟะพ ัะผะพะปัะฐะฝะธั

ะัะฑะตัะธัะต ััััะพะนััะฒะพ (0-3): 1
โ ะัะฑัะฐะฝะพ: BT13 (8B:EB:75:4E:65:97)

๐ง ะะฑะฝะพะฒะปะตะฝะธะต MAC ะฐะดัะตัะฐ ะฒ ะบะพะดะต...
โ MAC ะฐะดัะตั ะพะฑะฝะพะฒะปะตะฝ ะฒ ะบะพะดะต: {0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97}
๐พ ะกะพะทะดะฐะฝะฐ ัะตะทะตัะฒะฝะฐั ะบะพะฟะธั: main/main.c.backup

๐ Bluetooth ััััะพะนััะฒะพ ะฝะฐัััะพะตะฝะพ ััะฟะตัะฝะพ!
```

### ะัะธะผะตั ั ัััะฝัะผ ะฒะฒะพะดะพะผ MAC:
```
โ๏ธ  ะกะบะฐะฝะธัะพะฒะฐะฝะธะต ะฝะต ะดะฐะปะพ ัะตะทัะปััะฐัะพะฒ
ะฃะฑะตะดะธัะตัั ััะพ:
1. BT13 ะฒะบะปััะตะฝ (ัะธะฝะธะน LED ะผะธะณะฐะตั)
2. BT13 ะฝะฐัะพะดะธััั ััะดะพะผ (< 10 ะผะตััะพะฒ)
3. BT13 ะฝะต ะฟะพะดะบะปััะตะฝ ะบ ะดััะณะพะผั ััััะพะนััะฒั

๐ก ะะพะฟัะพะฑัะนัะต:
โข ะะตัะตะทะฐะฟัััะธัั BT13 (ะฒัะบะปััะธัั/ะฒะบะปััะธัั)
โข ะัะบะปััะธัั BT13 ะพั ะดััะณะธั ััััะพะนััะฒ
โข ะะฐะฟัััะธัั ัะบัะธะฟั ั sudo (ะตัะปะธ ััะตะฑัะตััั)

๐ก ะฅะพัะธัะต ะฒะฒะตััะธ MAC ะฐะดัะตั ะฒัััะฝัั?
ะะฒะตััะธ MAC ะฒัััะฝัั? (y/N): y

โ๏ธ  ะััะฝะพะน ะฒะฒะพะด MAC ะฐะดัะตัะฐ
ะะฒะตะดะธัะต MAC ะฐะดัะตั ะฒะฐัะตะณะพ BT13 ะฟัะปััะฐ ะฒ ัะพัะผะฐัะต XX:XX:XX:XX:XX:XX
ะัะธะผะตั: 8B:EB:75:4E:65:97

MAC ะฐะดัะตั: 8B:EB:75:4E:65:97
โ MAC ะฐะดัะตั ะบะพััะตะบัะตะฝ: 8B:EB:75:4E:65:97

๐ง ะะฑะฝะพะฒะปะตะฝะธะต MAC ะฐะดัะตัะฐ ะฒ ะบะพะดะต...
โ MAC ะฐะดัะตั ะพะฑะฝะพะฒะปะตะฝ ะฒ ะบะพะดะต: {0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97}
๐พ ะกะพะทะดะฐะฝะฐ ัะตะทะตัะฒะฝะฐั ะบะพะฟะธั: main/main.c.backup

๐ MAC ะฐะดัะตั ะฝะฐัััะพะตะฝ ะฒัััะฝัั!
```

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะคะพัะผะฐั MAC ะฐะดัะตัะฐ:
- **ะัะพะด**: `8B:EB:75:4E:65:97`
- **ะ ะบะพะดะต**: `{0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97}`

### ะคะฐะนะปั ะธะทะผะตะฝะตะฝะธะน:
- **ะัะฝะพะฒะฝะพะน ัะฐะนะป**: `main/main.c` (ัััะพะบะฐ 44)
- **ะะตะทะตัะฒะฝะฐั ะบะพะฟะธั**: `main/main.c.backup`
- **ะัะตะผะตะฝะฝัะต ัะฐะนะปั**: `/tmp/bt_devices.txt`, `/tmp/selected_mac.txt`

### ะะปะณะพัะธัะผ ัะบะฐะฝะธัะพะฒะฐะฝะธั:
1. **bluetoothctl scan on** (15 ัะตะบัะฝะด)
2. **bluetoothctl devices** (ะฟะพะปััะตะฝะธะต ัะฟะธัะบะฐ)
3. **hcitool scan** (ัะตะทะตัะฒะฝัะน ะผะตัะพะด)

## โ๏ธ ะะฐะถะฝัะต ะผะพะผะตะฝัั

1. **ะะบะปััะธัะต BT13** ะฟะตัะตะด ัะบะฐะฝะธัะพะฒะฐะฝะธะตะผ (ะดะพะปะณะพะต ะฝะฐะถะฐัะธะต ััะตะดะฝะตะน ะบะฝะพะฟะบะธ)
2. **ะกะธะฝะธะน LED ะดะพะปะถะตะฝ ะผะธะณะฐัั** ะฝะฐ BT13
3. **ะะฐัััะพัะฝะธะต < 10 ะผะตััะพะฒ** ะดะปั ะฝะฐะดะตะถะฝะพะณะพ ะพะฑะฝะฐััะถะตะฝะธั
4. **ะัะบะปััะธัะต ะพั ะดััะณะธั ััััะพะนััะฒ** ะตัะปะธ BT13 ัะถะต ะฟะพะดะบะปััะตะฝ
5. **ะัะฐะฒะฐ sudo** ะผะพะณัั ะฟะพััะตะฑะพะฒะฐัััั ะดะปั ัะฟัะฐะฒะปะตะฝะธั Bluetooth

## ๐ ะะพัััะฐะฝะพะฒะปะตะฝะธะต

ะัะปะธ ััะพ-ัะพ ะฟะพัะปะพ ะฝะต ัะฐะบ:

```bash
# ะะพัััะฐะฝะพะฒะธัั ะพัะธะณะธะฝะฐะปัะฝัะน main.c
cp main/main.c.backup main/main.c

# ะะปะธ ะธัะฟะพะปัะทะพะฒะฐัั ะพัะธะณะธะฝะฐะปัะฝัะน ัััะฐะฝะพะฒัะธะบ
./install.sh
```

## ๐ ะัะปะธัะธั ะพั install.sh

| ะคัะฝะบัะธั | install.sh | install_bt.sh |
|---------|------------|---------------|
| ESP-IDF ัััะฐะฝะพะฒะบะฐ | โ | โ |
| ะะพะผะฟะธะปััะธั | โ | โ |
| ะัะพัะธะฒะบะฐ | โ | โ |
| ะะพะฝะธัะพัะธะฝะณ | โ | โ |
| **BT ัะบะฐะฝะธัะพะฒะฐะฝะธะต** | โ | โ |
| **ะะฒัะพะฝะฐัััะพะนะบะฐ MAC** | โ | โ |
| **ะกะฟะธัะพะบ ััััะพะนััะฒ** | โ | โ |
| **ะะตะทะตัะฒะฝัะต ะบะพะฟะธะธ** | โ | โ |

---

**ะะตะบะพะผะตะฝะดะฐัะธั**: ะัะฟะพะปัะทัะนัะต `install_bt.sh` ะตัะปะธ ั ะฒะฐั ะฝะตัะบะพะปัะบะพ BT ััััะพะนััะฒ ะธะปะธ ะฝะตะธะทะฒะตััะตะฝ MAC ะฐะดัะตั ะฒะฐัะตะณะพ ะฟัะปััะฐ.