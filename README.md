# üöó bluetooth2brushless

ESP32 + –ø—É–ª—å—Ç BT13 = —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å—â–µ—Ç–æ—á–Ω—ã–º –¥–≤–∏–≥–∞—Ç–µ–ª–µ–º

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/dmoefasc/bluetooth2brushless.git
cd bluetooth2brushless

# –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
./install.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç ESP-IDF –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ –°–æ–±–µ—Ä–µ—Ç –ø—Ä–æ–µ–∫—Ç
- ‚úÖ –ù–∞–π–¥–µ—Ç ESP32
- ‚úÖ –ü—Ä–æ—à—å–µ—Ç ESP32
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

#### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **ESP-IDF v5.4+** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- ESP32 DevKit
- USB –∫–∞–±–µ–ª—å
- –ü—É–ª—å—Ç BT13

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ESP-IDF
```bash
mkdir -p ~/esp && cd ~/esp
git clone --recursive https://github.com/espressif/esp-idf.git
cd esp-idf && ./install.sh esp32 && . ./export.sh
```

#### 3. –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞
```bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è ESP-IDF (–≤ –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏)
. ~/esp/esp-idf/export.sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–ª–∏ ESP32
idf.py set-target esp32

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
idf.py build

# –ü—Ä–æ—à–∏–≤–∫–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ /dev/ttyUSB0 –Ω–∞ –≤–∞—à –ø–æ—Ä—Ç)
idf.py -p /dev/ttyUSB0 flash

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Ctrl+] –¥–ª—è –≤—ã—Ö–æ–¥–∞)
idf.py -p /dev/ttyUSB0 monitor
```

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
ESP32 GPIO 25 ‚Üí ESC PWM –≤—Ö–æ–¥ (—Å–∏–≥–Ω–∞–ª —Å–∫–æ—Ä–æ—Å—Ç–∏)
ESP32 GPIO 26 ‚Üí ESC —Ä–µ–≤–µ—Ä—Å (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
ESP32 GND     ‚Üí ESC GND
ESP32 GPIO 2  ‚Üí LED (–∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è)
```

### ‚ö†Ô∏è –í–∞–∂–Ω–æ!
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ESC (Electronic Speed Controller)** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ—Å—â–µ—Ç–æ—á–Ω—ã–º –¥–≤–∏–≥–∞—Ç–µ–ª–µ–º
- **–ù–ï –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ ESP32 –Ω–∞–ø—Ä—è–º—É—é –∫ –¥–≤–∏–≥–∞—Ç–µ–ª—é!** –≠—Ç–æ –º–æ–∂–µ—Ç –ø–æ–≤—Ä–µ–¥–∏—Ç—å ESP32
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ESC –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–≤–µ—Ä—Å (–¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ ESC
- Hobbywing QuicRun 1060 Brushed ESC
- Traxxas XL-5 ESC
- –õ—é–±–æ–π ESC —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PWM —Å–∏–≥–Ω–∞–ª–∞ –∏ —Ä–µ–≤–µ—Ä—Å–∞

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ BT13

| –ö–Ω–æ–ø–∫–∞ BT13 | –î–µ–π—Å—Ç–≤–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|----------|
| **+ –∫–æ—Ä–æ—Ç–∫–æ–µ** | +1 —É—Ä–æ–≤–µ–Ω—å —Å–∫–æ—Ä–æ—Å—Ç–∏ | –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ 10% |
| **- –∫–æ—Ä–æ—Ç–∫–æ–µ** | -1 —É—Ä–æ–≤–µ–Ω—å —Å–∫–æ—Ä–æ—Å—Ç–∏ | –£–º–µ–Ω—å—à–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ 10% |
| **+ –¥–ª–∏–Ω–Ω–æ–µ** | –ú–∞–∫—Å–∏–º—É–º –≤–ø–µ—Ä–µ–¥ | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ 100% –≤–ø–µ—Ä–µ–¥ |
| **- –¥–ª–∏–Ω–Ω–æ–µ** | –ú–∞–∫—Å–∏–º—É–º –Ω–∞–∑–∞–¥ | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ 100% –Ω–∞–∑–∞–¥ |
| **–°—Ä–µ–¥–Ω—è—è** | –°–¢–û–ü | –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ |

### –õ–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **10 —É—Ä–æ–≤–Ω–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏**: –æ—Ç -10 (–º–∞–∫—Å–∏–º—É–º –Ω–∞–∑–∞–¥) –¥–æ +10 (–º–∞–∫—Å–∏–º—É–º –≤–ø–µ—Ä–µ–¥)
- **0 —É—Ä–æ–≤–µ–Ω—å**: –ø–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- **–ü–ª–∞–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –∫–æ—Ä–æ—Ç–∫–∏–µ –Ω–∞–∂–∞—Ç–∏—è –¥–ª—è —Ç–æ—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–ë—ã—Å—Ç—Ä–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –¥–ª–∏–Ω–Ω—ã–µ –Ω–∞–∂–∞—Ç–∏—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- **–ê–≤—Ç–æ—Å—Ç–æ–ø**: –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ BT13 –¥–≤–∏–≥–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∏–Ω–æ–≤
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `main/main.c`:
```c
#define MOTOR_SPEED_PIN     GPIO_NUM_25  // PWM —Å–∏–≥–Ω–∞–ª
#define MOTOR_DIR_PIN       GPIO_NUM_26  // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
#define LED_PIN             GPIO_NUM_2   // –ò–Ω–¥–∏–∫–∞—Ü–∏—è
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ MAC –∞–¥—Ä–µ—Å–∞ BT13
–ï—Å–ª–∏ —É –≤–∞—Å –¥—Ä—É–≥–æ–π –ø—É–ª—å—Ç BT13, –∏–∑–º–µ–Ω–∏—Ç–µ MAC –∞–¥—Ä–µ—Å –≤ `main/main.c`:
```c
static esp_bd_addr_t bt13_addr = {0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97};
```

–î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è MAC –∞–¥—Ä–µ—Å–∞ –≤–∞—à–µ–≥–æ BT13:
1. –í–∫–ª—é—á–∏—Ç–µ BT13
2. –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ/–∫–æ–º–ø—å—é—Ç–µ—Ä–µ –Ω–∞–π–¥–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ "BT13" –≤ —Å–ø–∏—Å–∫–µ Bluetooth
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –µ–≥–æ MAC –∞–¥—Ä–µ—Å

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
=== ESP32 HID Host Motor Control ===
System initialization...
Motor initialized
Bluetooth initialized
Searching for BT13 remote (MAC: 8B:EB:75:4E:65:97)...
Found device: 8b:eb:75:4e:65:97
Found BT13! Stopping discovery...
Connecting to BT13...
BT13 connected successfully!
Ready to receive commands from remote
```

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–æ–∫:
```
HID data (3 bytes): 01 B5 00
HID Usage: 0x00B5
Command: Short + (level increase)
Short +: Speed level = 1 (10% forward)
State: ON | Level: 1/10 | PWM: 25/255 | Direction: FORWARD
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### ESP32 –Ω–µ –Ω–∞–π–¥–µ–Ω
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ—Ä—Ç—ã
ls /dev/tty* | grep -E "(USB|ACM)"

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã
idf.py -p /dev/ttyUSB1 flash
idf.py -p /dev/ttyACM0 flash
```

### BT13 –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
1. **–ó–∞—Ä—è–¥–∏—Ç–µ BT13** (–∫—Ä–∞—Å–Ω—ã–π LED –¥–æ–ª–∂–µ–Ω –ø–æ–≥–∞—Å–Ω—É—Ç—å)
2. **–í–∫–ª—é—á–∏—Ç–µ BT13**: –¥–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ —Å—Ä–µ–¥–Ω–µ–π –∫–Ω–æ–ø–∫–∏ (—Å–∏–Ω–∏–π LED –º–∏–≥–∞–µ—Ç)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ MAC –∞–¥—Ä–µ—Å** –≤ –ª–æ–≥–∞—Ö ESP32
4. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ ESP32** –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### –î–≤–∏–≥–∞—Ç–µ–ª—å –Ω–µ –≤—Ä–∞—â–∞–µ—Ç—Å—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ESC**
2. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ ESC –≤–∫–ª—é—á–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ ESC –∏ –¥–≤–∏–≥–∞—Ç–µ–ª—è**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ PWM —Å–∏–≥–Ω–∞–ª** (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 0-255)

### –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏
```bash
# –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
idf.py clean
idf.py build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ ESP-IDF
idf.py --version
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bluetooth2brushless/
‚îú‚îÄ‚îÄ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ LICENSE                # –õ–∏—Ü–µ–Ω–∑–∏—è MIT
‚îú‚îÄ‚îÄ CMakeLists.txt         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ sdkconfig.defaults     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ESP-IDF
‚îú‚îÄ‚îÄ install.sh             # –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îî‚îÄ‚îÄ main/
    ‚îú‚îÄ‚îÄ CMakeLists.txt     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    ‚îî‚îÄ‚îÄ main.c             # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ESC** –º–µ–∂–¥—É ESP32 –∏ –¥–≤–∏–≥–∞—Ç–µ–ª–µ–º
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—è—Ä–Ω–æ—Å—Ç—å** –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–ù–µ –ø—Ä–µ–≤—ã—à–∞–π—Ç–µ –Ω–æ–º–∏–Ω–∞–ª—å–Ω—ã–µ —Ç–æ–∫–∏** ESP32 (–º–∞–∫—Å–∏–º—É–º 40mA –Ω–∞ –ø–∏–Ω)
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏** –≤ —Å–∏–ª–æ–≤—ã—Ö —Ü–µ–ø—è—Ö
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–∞–ª—ã—Ö —Å–∫–æ—Ä–æ—Å—Ç—è—Ö** –ø–µ—Ä–µ–¥ –ø–æ–ª–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ ESP32 —á–µ—Ä–µ–∑ `idf.py monitor`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é ESP-IDF (—Ç—Ä–µ–±—É–µ—Ç—Å—è v5.4+)
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

---

**MAC BT13 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `8B:EB:75:4E:65:97`