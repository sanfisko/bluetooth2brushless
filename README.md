# üèÑ ESP32 Bluetooth Motor Control

ESP32 + Bluetooth HID –ø—É–ª—å—Ç = —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å—â–µ—Ç–æ—á–Ω—ã–º –¥–≤–∏–≥–∞—Ç–µ–ª–µ–º

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üõí –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **Bluetooth –ø—É–ª—å—Ç BT13**: [AliExpress](https://a.aliexpress.com/_EIvUKYS) *(–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç)*
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–≤–∏–≥–∞—Ç–µ–ª—è**: [AliExpress](https://a.aliexpress.com/_EyfVQSQ)
- **–ë–µ—Å—â–µ—Ç–æ—á–Ω—ã–π –º–æ—Ç–æ—Ä**: [AliExpress](https://a.aliexpress.com/_Exu4xp0)
- **ESP32 –ø–ª–∞—Ç–∞**: [AliExpress](https://a.aliexpress.com/_ExqenUe)

### ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/sanfisko/esp32-bluetooth-motor-control.git
cd esp32-bluetooth-motor-control

# –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
./install.sh
```

**üÜï –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å Bluetooth —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ BT —É—Å—Ç—Ä–æ–π—Å—Ç–≤
./install_bt.sh
```
> üì° **install_bt.sh** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ –æ–∫—Ä—É–≥–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π MAC –∞–¥—Ä–µ—Å–∞. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí](README_install_bt.md)

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (git, python3, curl, pip)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç ESP-IDF –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ESP-IDF
- ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç ESP-IDF –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ –°–æ–±–µ—Ä–µ—Ç –ø—Ä–æ–µ–∫—Ç
- ‚úÖ –ù–∞–π–¥–µ—Ç ESP32
- ‚úÖ –ü—Ä–æ—à—å–µ—Ç ESP32 (—Å–∫–æ—Ä–æ—Å—Ç—å 115200 –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏)
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–≤—ã—Ö–æ–¥: **Ctrl+]**)

## üì° –°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –ø—É–ª—å—Ç—ã

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**: [BT13 –ø—É–ª—å—Ç —Å AliExpress](https://a.aliexpress.com/_EIvUKYS) - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

<details>
<summary><small>üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—É–ª—å—Ç—É (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)</small></summary>

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ Bluetooth –ø—É–ª—å—Ç—É:
- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: Bluetooth Classic (BR/EDR) - –ù–ï Bluetooth Low Energy (BLE)
- **–ü—Ä–æ—Ñ–∏–ª—å**: HID (Human Interface Device) 
- **–ö–ª–∞—Å—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**: Consumer Control –∏–ª–∏ Generic HID
- **HID Usage –∫–æ–¥—ã**: –î–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–¥—ã (—Å–º. —Ç–∞–±–ª–∏—Ü—É –Ω–∏–∂–µ)

### ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É–ª—å—Ç—ã:
| –ú–æ–¥–µ–ª—å | –°—Ç–∞—Ç—É—Å | MAC –∞–¥—Ä–µ—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|--------|--------|-----------|------------|
| **BT13** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 8B:EB:75:4E:65:97 | –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –ø—É–ª—å—Ç |

### üîß HID Usage –∫–æ–¥—ã:
| –ö–Ω–æ–ø–∫–∞ | HID Usage | –§—É–Ω–∫—Ü–∏—è |
|--------|-----------|---------|
| –ö–æ—Ä–æ—Ç–∫–æ–µ + | 0x0004 | –£–≤–µ–ª–∏—á–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ 1 —É—Ä–æ–≤–µ–Ω—å |
| –ö–æ—Ä–æ—Ç–∫–æ–µ - | 0x0008 | –£–º–µ–Ω—å—à–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ 1 —É—Ä–æ–≤–µ–Ω—å |
| –î–ª–∏–Ω–Ω–æ–µ + | 0x0001 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤–ø–µ—Ä–µ–¥ |
| –î–ª–∏–Ω–Ω–æ–µ - | 0x0002 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞–∑–∞–¥ |
| STOP | 0x0010 | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è |

### ‚ùå –ù–ï –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø—É–ª—å—Ç—ã:
- BLE (Bluetooth Low Energy) –ø—É–ª—å—Ç—ã
- –ü—É–ª—å—Ç—ã –±–µ–∑ HID –ø—Ä–æ—Ñ–∏–ª—è
- –ü—É–ª—å—Ç—ã —Å –¥—Ä—É–≥–∏–º–∏ HID Usage –∫–æ–¥–∞–º–∏
- WiFi –ø—É–ª—å—Ç—ã
- IR (–∏–Ω—Ñ—Ä–∞–∫—Ä–∞—Å–Ω—ã–µ) –ø—É–ª—å—Ç—ã

</details>

<details>
<summary>üîß –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–≥–æ –ø—É–ª—å—Ç–∞</summary>

### üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—É–ª—å—Ç–∞**:
   - –î–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å "Bluetooth Classic" –∏–ª–∏ "BR/EDR"
   - –î–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ "HID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ" –∏–ª–∏ "Bluetooth –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞/–º—ã—à—å"

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**:
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å –≤–∞—à–∏–º –ø—É–ª—å—Ç–æ–º
   - –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: `"Found device matching BT13 pattern"`
   - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–æ–∫ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è HID Usage –∫–æ–¥—ã

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ MAC –∞–¥—Ä–µ—Å–∞**:
   - –ï—Å–ª–∏ –≤–∞—à –ø—É–ª—å—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º, –Ω–æ –∏–º–µ–µ—Ç –¥—Ä—É–≥–æ–π MAC –∞–¥—Ä–µ—Å
   - –ò–∑–º–µ–Ω–∏—Ç–µ `bt13_addr` –≤ `main/main.c` –Ω–∞ MAC –≤–∞—à–µ–≥–æ –ø—É–ª—å—Ç–∞

### üõ†Ô∏è –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. **–£–∑–Ω–∞–π—Ç–µ MAC –∞–¥—Ä–µ—Å** –≤–∞—à–µ–≥–æ –ø—É–ª—å—Ç–∞
2. **–ò–∑–º–µ–Ω–∏—Ç–µ MAC –≤ –∫–æ–¥–µ**: `main/main.c`, —Å—Ç—Ä–æ–∫–∞ 44
   ```c
   static esp_bd_addr_t bt13_addr = {0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97};
   ```
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ HID –∫–æ–¥—ã**: –≤–∫–ª—é—á–∏—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∫–∏–µ –∫–æ–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∞—à –ø—É–ª—å—Ç
4. **–û–±–Ω–æ–≤–∏—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –∫–Ω–æ–ø–æ–∫** –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `hid_host_cb()` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

</details>

## üí° –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

1. **ESP32** —Å–∫–∞–Ω–∏—Ä—É–µ—Ç Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
2. **–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è** –∫ –ø—É–ª—å—Ç—É BT13 –ø–æ MAC –∞–¥—Ä–µ—Å—É
3. **–ü–æ–ª—É—á–∞–µ—Ç HID –∫–æ–º–∞–Ω–¥—ã** –æ—Ç –ø—É–ª—å—Ç–∞ (–∫–æ–¥—ã –∫–Ω–æ–ø–æ–∫)
4. **–£–ø—Ä–∞–≤–ª—è–µ—Ç –º–æ—Ç–æ—Ä–æ–º** —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–≤–∏–≥–∞—Ç–µ–ª—è

## üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç –∏ –ø–æ–¥—Å–∫–∞–∂–µ—Ç –∫–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
- **git** - –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ ESP-IDF
- **python3** - –æ—Å–Ω–æ–≤–∞ ESP-IDF  
- **curl** - –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **pip3** - –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python

<details>
<summary>–ö–æ–º–∞–Ω–¥—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º</summary>

```bash
# Ubuntu/Debian
sudo apt update && sudo apt install git python3 curl python3-pip

# CentOS/RHEL/Fedora  
sudo yum install git python3 curl python3-pip

# macOS
brew install git python3 curl
```

</details>

<details>
<summary>üõ†Ô∏è –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)</summary>

#### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **ESP-IDF v5.4+** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- ESP32 DevKit
- USB –∫–∞–±–µ–ª—å
- –ü—É–ª—å—Ç BT13

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ESP-IDF
```bash
mkdir -p ~/esp && cd ~/esp
git clone --recursive https://github.com/espressif/esp-idf.git
cd esp-idf && ./install.sh esp32 && . ./export.sh
```

#### 3. –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞
```bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è ESP-IDF (–≤ –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏)
. ~/esp/esp-idf/export.sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–ª–∏ ESP32
idf.py set-target esp32

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
idf.py build

# –ü—Ä–æ—à–∏–≤–∫–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ /dev/ttyUSB0 –Ω–∞ –≤–∞—à –ø–æ—Ä—Ç)
idf.py -p /dev/ttyUSB0 flash

# –ü—Ä–æ—à–∏–≤–∫–∞ —Å –ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é (–¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∫–∞–±–µ–ª–µ–π)
idf.py -p /dev/ttyUSB0 -b 115200 flash

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Ctrl+] –¥–ª—è –≤—ã—Ö–æ–¥–∞)
idf.py -p /dev/ttyUSB0 monitor
```

</details>

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
ESP32 GPIO 25 ‚Üí –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä PWM –≤—Ö–æ–¥ (—Å–∏–≥–Ω–∞–ª —Å–∫–æ—Ä–æ—Å—Ç–∏)
ESP32 GPIO 26 ‚Üí –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ä–µ–≤–µ—Ä—Å (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
ESP32 GND     ‚Üí –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä GND
ESP32 GPIO 2  ‚Üí LED (–∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è)
```



## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ BT13

| –ö–Ω–æ–ø–∫–∞ BT13 | –î–µ–π—Å—Ç–≤–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|----------|
| **+ –∫–æ—Ä–æ—Ç–∫–æ–µ** | +1 —É—Ä–æ–≤–µ–Ω—å —Å–∫–æ—Ä–æ—Å—Ç–∏ | –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ 20% |
| **- –∫–æ—Ä–æ—Ç–∫–æ–µ** | -1 —É—Ä–æ–≤–µ–Ω—å —Å–∫–æ—Ä–æ—Å—Ç–∏ | –£–º–µ–Ω—å—à–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ 20% |
| **+ –¥–ª–∏–Ω–Ω–æ–µ** | –ú–∞–∫—Å–∏–º—É–º –≤–ø–µ—Ä–µ–¥ | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ 100% –≤–ø–µ—Ä–µ–¥ |
| **- –¥–ª–∏–Ω–Ω–æ–µ** | –ú–∞–∫—Å–∏–º—É–º –Ω–∞–∑–∞–¥ | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ 100% –Ω–∞–∑–∞–¥ |
| **–°—Ä–µ–¥–Ω—è—è** | –°–¢–û–ü | –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ |

### –õ–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **5 —É—Ä–æ–≤–Ω–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏**: –æ—Ç -5 (–º–∞–∫—Å–∏–º—É–º –Ω–∞–∑–∞–¥) –¥–æ +5 (–º–∞–∫—Å–∏–º—É–º –≤–ø–µ—Ä–µ–¥)
- **0 —É—Ä–æ–≤–µ–Ω—å**: –ø–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- **–ü–ª–∞–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –∫–æ—Ä–æ—Ç–∫–∏–µ –Ω–∞–∂–∞—Ç–∏—è –¥–ª—è —Ç–æ—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—à–∞–≥ 20%)
- **–ë—ã—Å—Ç—Ä–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –¥–ª–∏–Ω–Ω—ã–µ –Ω–∞–∂–∞—Ç–∏—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- **–ê–≤—Ç–æ—Å—Ç–æ–ø**: –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ BT13 –¥–≤–∏–≥–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã
–ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ESP32:
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ª–æ–≥–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ BT13
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –æ—Ç –ø—É–ª—å—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –í—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ò–Ω–¥–∏–∫–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è PWM —Å–∏–≥–Ω–∞–ª–æ–≤

**–ö–æ–º–∞–Ω–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
- **Ctrl+]** - –≤—ã—Ö–æ–¥ –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è ESP-IDF

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
```
I (12345) BT_HID: HID Usage: 0x00B5 (+ –∫–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ)
I (12346) MOTOR: Command: Short +, Speed level = 1
I (12347) MOTOR: PWM: 51/255, Direction: FORWARD
I (12348) LED: State: ON
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∏–Ω–æ–≤
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `main/main.c`:
```c
#define MOTOR_SPEED_PIN     GPIO_NUM_25  // PWM —Å–∏–≥–Ω–∞–ª
#define MOTOR_DIR_PIN       GPIO_NUM_26  // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
#define LED_PIN             GPIO_NUM_2   // –ò–Ω–¥–∏–∫–∞—Ü–∏—è
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ MAC –∞–¥—Ä–µ—Å–∞ BT13

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ü–æ–∏—Å–∫ –ø—É–ª—å—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–¢–û–õ–¨–ö–û –ø–æ MAC –∞–¥—Ä–µ—Å—É**, –∞ –Ω–µ –ø–æ –∏–º–µ–Ω–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞!

#### üîç –ö–∞–∫ –Ω–∞–π—Ç–∏ MAC –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ BT13

**–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω/–∫–æ–º–ø—å—é—Ç–µ—Ä**
1. –í–∫–ª—é—á–∏—Ç–µ BT13 (–¥–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ —Å—Ä–µ–¥–Ω–µ–π –∫–Ω–æ–ø–∫–∏, —Å–∏–Ω–∏–π LED –º–∏–≥–∞–µ—Ç)
2. –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ/–ü–ö –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Bluetooth
3. –ù–∞–π–¥–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ "BT13" –≤ —Å–ø–∏—Å–∫–µ
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ MAC –∞–¥—Ä–µ—Å (—Ñ–æ—Ä–º–∞—Ç: `XX:XX:XX:XX:XX:XX`)

**–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –ª–æ–≥–∏ ESP32**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å –ª—é–±—ã–º MAC –∞–¥—Ä–µ—Å–æ–º
2. –í–∫–ª—é—á–∏—Ç–µ BT13
3. –í –ª–æ–≥–∞—Ö –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É: `Found device: xx:xx:xx:xx:xx:xx`
4. –≠—Ç–æ –∏ –µ—Å—Ç—å MAC –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ BT13

#### üîß –ò–∑–º–µ–Ω–µ–Ω–∏–µ MAC –∞–¥—Ä–µ—Å–∞ –≤ –∫–æ–¥–µ

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `main/main.c` –∏ –Ω–∞–π–¥–∏—Ç–µ **—Å—Ç—Ä–æ–∫—É 44**:
```c
static esp_bd_addr_t bt13_addr = {0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97};
```

–ó–∞–º–µ–Ω–∏—Ç–µ MAC –∞–¥—Ä–µ—Å –Ω–∞ –≤–∞—à. **–ü—Ä–∏–º–µ—Ä**:
- –í–∞—à MAC: `AA:BB:CC:DD:EE:FF`
- –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞: `{0xAA, 0xBB, 0xCC, 0xDD, 0xEE, 0xFF}`

```c
// –ë—ã–ª–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
static esp_bd_addr_t bt13_addr = {0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97};

// –°—Ç–∞–ª–æ (–≤–∞—à MAC):
static esp_bd_addr_t bt13_addr = {0xAA, 0xBB, 0xCC, 0xDD, 0xEE, 0xFF};
```

#### üìù –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ MAC –∞–¥—Ä–µ—Å–∞
- MAC `8B:EB:75:4E:65:97` ‚Üí `{0x8B, 0xEB, 0x75, 0x4E, 0x65, 0x97}`
- –ö–∞–∂–¥–∞—è –ø–∞—Ä–∞ —Å–∏–º–≤–æ–ª–æ–≤ ‚Üí `0xXX`
- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ `:` —É–±–∏—Ä–∞—é—Ç—Å—è
- –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å `0x` –∫ –∫–∞–∂–¥–æ–π –ø–∞—Ä–µ

#### ‚úÖ –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `idf.py build`
3. –ü—Ä–æ—à–µ–π—Ç–µ ESP32: `idf.py flash`
4. –í–∫–ª—é—á–∏—Ç–µ BT13 –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
=== ESP32 HID Host Motor Control ===
System initialization...
Motor initialized
Bluetooth initialized
Searching for BT13 remote (MAC: 8B:EB:75:4E:65:97)...
Found device: 8b:eb:75:4e:65:97
Found BT13! Stopping discovery...
Connecting to BT13...
BT13 connected successfully!
Ready to receive commands from remote
```

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–æ–∫:
```
HID data (3 bytes): 01 B5 00
HID Usage: 0x00B5
Command: Short + (level increase)
Short +: Speed level = 1 (10% forward)
State: ON | Level: 1/10 | PWM: 25/255 | Direction: FORWARD
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ—à–∏–≤–∫–æ–π

**ESP32 –Ω–µ –Ω–∞–π–¥–µ–Ω**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ—Ä—Ç—ã
ls /dev/tty* | grep -E "(USB|ACM)"

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã
idf.py -p /dev/ttyUSB1 flash
idf.py -p /dev/ttyACM0 flash
```

**–û—à–∏–±–∫–∏ –ø—Ä–æ—à–∏–≤–∫–∏ / –ø–ª–æ—Ö–æ–π –∫–∞–±–µ–ª—å**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω–∏–∂–µ–Ω–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
idf.py -p /dev/ttyUSB0 -b 115200 flash

# –ò–ª–∏ –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
idf.py -p /dev/ttyUSB0 -b 9600 flash

# –ü—Ä—è–º–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ —á–µ—Ä–µ–∑ esptool
python -m esptool --chip esp32 -p /dev/ttyUSB0 -b 115200 \
  --before default_reset --after hard_reset write_flash \
  --flash_mode dio --flash_freq 40m --flash_size 2MB \
  0x1000 build/bootloader/bootloader.bin \
  0x10000 build/bt13_motor_control.bin \
  0x8000 build/partition_table/partition-table.bin
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ ESP32 —á–µ—Ä–µ–∑ `idf.py monitor`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é ESP-IDF (—Ç—Ä–µ–±—É–µ—Ç—Å—è v5.4+)
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

---

**MAC BT13 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `8B:EB:75:4E:65:97`